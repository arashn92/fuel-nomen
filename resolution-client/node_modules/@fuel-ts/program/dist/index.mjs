var V=["Success","Revert","OutOfGas","TransactionValidity","MemoryOverflow","ArithmeticOverflow","ContractNotFound","MemoryOwnership","NotEnoughBalance","ExpectedInternalContext","AssetIdNotFound","InputNotFound","OutputNotFound","WitnessNotFound","TransactionMaturity","InvalidMetadataIdentifier","MalformedCallStructure","ReservedRegisterNotWritable","ErrorFlag","InvalidImmediateValue","ExpectedCoinInput","MaxMemoryAccess","MemoryWriteOverlap","ContractNotInInputs","InternalBalanceOverflow","ContractMaxSize","ExpectedUnallocatedStack","MaxStaticContractsReached","TransferAmountCannotBeZero","ExpectedOutputVariable","ExpectedParentInternalContext","IllegalJump","NonZeroMessageOutputRecipient","ZeroedMessageOutputRecipient"],w="https://docs.rs/fuel-asm/latest/fuel_asm/enum.PanicReason.html";var o0=r=>V.includes(r)?r:"unknown",$=r=>{if((r==null?void 0:r.type)==="failure"){let t=o0(r.reason);return{doc:t!=="unknown"?`${w}#variant.${t}`:w,reason:t}}return{doc:w,reason:"unknown"}};function T(r,t){if(!r)throw new Error(t)}import{ReceiptType as h0}from"@fuel-ts/transactions";import{Logger as m0}from"@ethersproject/logger";import{ReceiptType as f0}from"@fuel-ts/transactions";import{versions as y0}from"@fuel-ts/versions";import{FAILED_ASSERT_EQ_SIGNAL as s0,FAILED_ASSERT_SIGNAL as i0,FAILED_REQUIRE_SIGNAL as c0,FAILED_SEND_MESSAGE_SIGNAL as u0,FAILED_TRANSFER_TO_ADDRESS_SIGNAL as p0,FAILED_UNKNOWN_SIGNAL as l0}from"@fuel-ts/transactions/configs";var Q={[c0]:"RequireFailed",[p0]:"TransferToAddressFailed",[u0]:"SendMessageFailed",[s0]:"AssertEqFailed",[i0]:"AssertFailed",[l0]:"Unknown"},d0=r=>{let t=r.val.toHex();return Q[t]?Q[t]:void 0},y=class extends Error{receipt;constructor(t,e){super(`The script reverted with reason ${e}`),this.name="RevertError",this.receipt=t}toString(){let{id:t,...e}=this.receipt;return`${this.name}: ${this.message}
    ${t}: ${JSON.stringify(e)}`}},D=class extends y{constructor(t,e){super(t,e),this.name="RequireRevertError"}},N=class extends y{constructor(t,e){super(t,e),this.name="TransferToAddressRevertError"}},P=class extends y{constructor(t,e){super(t,e),this.name="SendMessageRevertError"}},q=class extends y{constructor(t,e){super(t,e),this.name="AssertFailedRevertError"}},G=r=>{let t=d0(r);if(!!t)switch(t){case"RequireFailed":return new D(r,t);case"TransferToAddressFailed":return new N(r,t);case"SendMessageFailed":return new P(r,t);case"AssertFailed":return new q(r,t);default:return new y(r,t)}};var R0=new m0(y0.FUELS),g0=r=>r.filter(t=>t.type===f0.Revert),x=class{revertReceipts;constructor(t){this.revertReceipts=g0(t)}assert(t){let e=this.getError();if(e)throw e.cause=t,e}getError(){if(!!this.revertReceipts.length)return this.revertReceipts.length!==1&&R0.warn("Multiple revert receipts found, expected one. Receipts:",JSON.stringify(this.revertReceipts)),G(this.revertReceipts[0])}};var C0=(r,t)=>typeof t=="bigint"?t.toString():t,_=class extends Error{logs;constructor(t,e,n){let o=JSON.stringify($(t.status),null,2),a=n.length?`Logs:
${JSON.stringify(n,null,2)}`:null,p=`Receipts:
${JSON.stringify(t.receipts.map(({type:s,...l})=>({type:h0[s],...l})),C0,2)}`;super(`${e}

${o}

${a?`${a}

`:""}${p}`),this.logs=n,new x(t.receipts).assert(this)}};import{coinQuantityfy as M0}from"@fuel-ts/providers";import{bn as h,toNumber as Y}from"@fuel-ts/math";import{transactionRequestify as t0,ScriptTransactionRequest as N0}from"@fuel-ts/providers";import{InputType as P0}from"@fuel-ts/transactions";import{MAX_GAS_PER_TX as q0}from"@fuel-ts/transactions/configs";import{arrayify as j,concat as z}from"@ethersproject/bytes";import{AbiCoder as H,U64Coder as U}from"@fuel-ts/abi-coder";import{bn as K,toNumber as E}from"@fuel-ts/math";import{ReceiptType as E0}from"@fuel-ts/transactions";var k=[{type:"function",inputs:[{name:"script_data",type:"struct ScriptData",components:[{name:"calls",type:"[enum Option; 5]",components:[{name:"__array_element",type:"enum Option",components:[{name:"None",type:"()",components:[],typeArguments:null},{name:"Some",type:"struct MulticallCall",components:[{name:"contract_id",type:"struct ContractId",components:[{name:"value",type:"b256",components:null,typeArguments:null}],typeArguments:null},{name:"fn_selector",type:"u64",components:null,typeArguments:null},{name:"fn_arg",type:"enum CallValue",components:[{name:"Value",type:"u64",components:null,typeArguments:null},{name:"Data",type:"(u64, u64)",components:[{name:"__tuple_element",type:"u64",components:null,typeArguments:null},{name:"__tuple_element",type:"u64",components:null,typeArguments:null}],typeArguments:null}],typeArguments:null},{name:"parameters",type:"struct CallParameters",components:[{name:"amount",type:"enum Option",components:[{name:"None",type:"()",components:[],typeArguments:null},{name:"Some",type:"u64",components:null,typeArguments:null}],typeArguments:[{name:"T",type:"u64",components:null,typeArguments:null}]},{name:"asset_id",type:"enum Option",components:[{name:"None",type:"()",components:[],typeArguments:null},{name:"Some",type:"struct ContractId",components:[{name:"value",type:"b256",components:null,typeArguments:null}],typeArguments:null}],typeArguments:[{name:"T",type:"struct ContractId",components:[{name:"value",type:"b256",components:null,typeArguments:null}],typeArguments:null}]},{name:"gas",type:"enum Option",components:[{name:"None",type:"()",components:[],typeArguments:null},{name:"Some",type:"u64",components:null,typeArguments:null}],typeArguments:[{name:"T",type:"u64",components:null,typeArguments:null}]}],typeArguments:null}],typeArguments:null}],typeArguments:[{name:"T",type:"struct MulticallCall",components:[{name:"contract_id",type:"struct ContractId",components:[{name:"value",type:"b256",components:null,typeArguments:null}],typeArguments:null},{name:"fn_selector",type:"u64",components:null,typeArguments:null},{name:"fn_arg",type:"enum CallValue",components:[{name:"Value",type:"u64",components:null,typeArguments:null},{name:"Data",type:"(u64, u64)",components:[{name:"__tuple_element",type:"u64",components:null,typeArguments:null},{name:"__tuple_element",type:"u64",components:null,typeArguments:null}],typeArguments:null}],typeArguments:null},{name:"parameters",type:"struct CallParameters",components:[{name:"amount",type:"enum Option",components:[{name:"None",type:"()",components:[],typeArguments:null},{name:"Some",type:"u64",components:null,typeArguments:null}],typeArguments:[{name:"T",type:"u64",components:null,typeArguments:null}]},{name:"asset_id",type:"enum Option",components:[{name:"None",type:"()",components:[],typeArguments:null},{name:"Some",type:"struct ContractId",components:[{name:"value",type:"b256",components:null,typeArguments:null}],typeArguments:null}],typeArguments:[{name:"T",type:"struct ContractId",components:[{name:"value",type:"b256",components:null,typeArguments:null}],typeArguments:null}]},{name:"gas",type:"enum Option",components:[{name:"None",type:"()",components:[],typeArguments:null},{name:"Some",type:"u64",components:null,typeArguments:null}],typeArguments:[{name:"T",type:"u64",components:null,typeArguments:null}]}],typeArguments:null}],typeArguments:null}]}],typeArguments:null}],typeArguments:null}],name:"main",outputs:[{name:"",type:"struct ScriptReturn",components:[{name:"call_returns",type:"[enum Option; 5]",components:[{name:"__array_element",type:"enum Option",components:[{name:"None",type:"()",components:[],typeArguments:null},{name:"Some",type:"enum CallValue",components:[{name:"Value",type:"u64",components:null,typeArguments:null},{name:"Data",type:"(u64, u64)",components:[{name:"__tuple_element",type:"u64",components:null,typeArguments:null},{name:"__tuple_element",type:"u64",components:null,typeArguments:null}],typeArguments:null}],typeArguments:null}],typeArguments:[{name:"T",type:"enum CallValue",components:[{name:"Value",type:"u64",components:null,typeArguments:null},{name:"Data",type:"(u64, u64)",components:[{name:"__tuple_element",type:"u64",components:null,typeArguments:null},{name:"__tuple_element",type:"u64",components:null,typeArguments:null}],typeArguments:null}],typeArguments:null}]}],typeArguments:null}],typeArguments:null}]}];var W="0x90000004470000000000000000000cd45dfcc00110fff3001a5c5000910005b861440006724002d0164114005b40100d360000006158000c61440001504175305f5d10a6504175305d4570a6504171385f5d1027504171385d417027134100007340001a9000001f1a445000910000085d43f0005f4500009000002b504171385d4170271341004073400024900000291a445000910000085d43f0015f4500009000002b360000001a44000050417528504175286041100850457528504170085041700860411008504170085d4100001341000073400037900000396144000c9000003b360000001a440000504174305f5d1086504174305d4570865d43f00210450440504174485f5d108961440001504175405f5d10a8504175405d4570a8504171405f5d1028504171405d417028134100007340004f900000541a445000910000085d43f0005f45000090000060504171405d41702813410040734000599000005e1a445000910000085d43f0015f45000090000060360000001a44000050417538504175386041100850457538504170005041700060411008504170005d410000134100007340006c9000006e6144000690000078504170005d410000134100407340007390000076360000001a44000090000078360000001a4400005d43f00220451400504173805f5d1070504174485d497089504173805d4170701a445000910000105f4520005f450001504175a8504175a8604110105d47f00326440000504470015041726050417260604110a026000000504070011a445000910000105f4500005f440001504174785041747860411010504173505f5c006a5d47f0025d43f00412451400504173005f5d1060504173505d45706a504173005d41706016411400734000a4900000b150496000504173505d41706a5545009010452440504170785041707860411090504170785d41000013410040734001249000031f504972601a445000910000a050411000604120a05041748850417488604110a026000000504070011a445000910000105f4500005f44000150417198504171986041101050517198505574885d454001504174085f5d10815d4540015d43f00310450440504173c85f5d10795d4140005d4d4001504573c85d457079154914c0734800d3900000e12644000050487001504573a85f5d207515453000734400da900000de504573a85d457075284504c0900000de504173a85d417075900000e15f510000504173c85d4170795f5100015d454000504174085d417081104504405d43f0032845540050557198505174785d41400113410000734000f1900000f35d4150019000011c5d455001504174105f5d10825d4550015d41400110450440504173d05f5d107a5d4150005d4d5001504573d05d45707a154914c073480102900001102644000050487001504573b05f5d207615453000734401099000010d504573b05d457076284504c09000010d504173b05d417076900001105f550000504173d05d41707a5f5500015d4940005d455000504174105d417082104504405d414001284524005d417082504171985d450000504171985d41000125450000504574885d43f003254500005041707850450008504171a8504171a860411088504171a850450028504171085041710860411018504171085d41000013410000734001339000013f504171085d450002504175485f5d10a9504175485d4970a91a445000910000185d43f0005f4500005f4520029000017b504171085d41000013410040734001449000016050417108504100085d450000504173e85f5d107d50417108504100085d450001504173785f5d106f504175a85d450000504173e85d41707d10450440504173785d41706f1a485000910000105f4910005f4900011a445000910000185d43f0015f45000050411008604120109000017b50417108504100085d450000504173f05f5d107e50417108504100085d450001504173905f5d1072504175a85d450000504173f05d41707e10450440504173905d4170721a485000910000105f4910005f4900011a445000910000185d43f0015f4500005041100860412010504173085041730860411018504171a850550000504171a85d51000450457308504171a8504d0040504170105041701060411018504170105d410000134100007340018d90000194504170105d450002504175505f5d10aa504175505d4570aa900001a8504170105d4100001341004073400199900001a150417010504100085d450000504174385f5d1087504174385d457087900001a850417010504100085d450000504174505f5d108a504174505d45708a504173205f5d1064504173205d4970641a4450009100003050411000604150205f4540045f45200550417230504172306041103050453000504170285041702860411010504170285d41000013410040734001be900001c5504170285d450001504171485f5d1029504171485d457029900001cd504170285d41000013410000734001ca900001cc1a440000900001cd1a440000504171505f5d102a50453010504170385041703860411028504170385d41000013410040734001d8900001df504170385045000850417358504173586041102050497358900001f1504170385d41000013410000734001e4900001eb1a485000910000205d47f00a104513005041200060411020900001f11a485000910000205d47f00a10451300504120006041102050417158504171586041202050453038504170605041706060411010504170605d41000013410040734001fd90000204504170605d450001504173405f5d1068504173405d4570689000020c504170605d41000013410000734002099000020b1a44a0009000020c1a44a000504173485f5d1069504d7230504171505d49702a50457158504173485d4170692d4d24501a44e000504170705f5d100e504170705d41700e134100007340021d900002281a44d000504175785f5d10af504175785d4570af1a485000910000185d43f0005f4900005f4910029000023d504170705d45700e504173885f5d10711a44d000504174585f5d108b504174585d49708b504173885d4170711a445000910000105f4520005f4500011a485000910000185d43f0015f490000504120086041101050417460504174606041201850457460504171205041712060411018504171205d410000134100007340024990000255504171205d450002504175a05f5d10b4504175a05d4970b41a445000910000185d43f0005f4500005f45200290000309504171205d410000134100407340025a900002b250417120504100085d450000504174285f5d108550417120504100085d450001504173985f5d1073504174285d497085504173985d4170731a445000910000105f4520005f45000150417178504171786041101050557478505171785d4140011341000073400275900002775d455001900002a15d455001504174185f5d10835d4550015d41400110450440504173d85f5d107b5d4150005d4d5001504573d85d45707b154914c073480286900002942644000050487001504573b85f5d2077154530007344028d90000291504573b85d457077284504c090000291504173b85d417077900002945f550000504173d85d41707b5f5500015d4940005d455000504174185d417083104504405d41400128452400504174185d457083504173f85f5d107f504173f85d45707f504173985d4170731a485000910000105f4910005f4900011a445000910000185d43f0015f45000050411008604120109000030950417120504100085d450000504174405f5d108850417120504100085d450001504173a05f5d1074504174405d497088504173a05d4170741a445000910000105f4520005f45000150417188504171886041101050557478505171885d41400113410000734002cd900002cf5d455001900002f95d455001504174205f5d10845d4550015d41400110450440504173e05f5d107c5d4150005d4d5001504573e05d45707c154914c0734802de900002ec2644000050487001504573c05f5d207815453000734402e5900002e9504573c05d457078284504c0900002e9504173c05d417078900002ec5f550000504173e05d41707c5f5500015d4940005d455000504174205d417084104504405d41400128452400504174205d457084504174005f5d1080504174005d457080504173a05d4170741a485000910000105f4910005f4900011a445000910000185d43f0015f4500005041100860412010504173285041732860411018504973281a445000910000205d43f0015f450000504110086041201850417558504175586041102050457260504173505d41706a5549002010491480504575585d43f009284914009000032e504175801a445000910000205d43f0005f450000504175806041102050457260504173505d41706a5549002010491480504575805d43f0092849140050417350504173505d41706a104014005f5d006a9000009d470000000000000000000000000000000000000100000000000002d000000000000000a00000000000000090000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000cfc";import{arrayify as A0}from"@ethersproject/bytes";import{Logger as B}from"@ethersproject/logger";import{VM_TX_MEMORY as v0,TRANSACTION_SCRIPT_FIXED_SIZE as S0,ASSET_ID_LEN as b0,WORD_SIZE as M,CONTRACT_ID_LEN as I0}from"@fuel-ts/abi-coder";import{ReceiptType as m,ByteArrayCoder as w0}from"@fuel-ts/transactions";import{versions as x0}from"@fuel-ts/versions";var J=new B(x0.FUELS);function _0(r){let t=[...r.receipts],e,n;if(t.forEach(a=>{a.type===m.ScriptResult?e=a:(a.type===m.Return||a.type===m.ReturnData||a.type===m.Revert)&&(n=a)}),!e)throw new Error("Expected scriptResultReceipt");if(!n)throw new Error("Expected returnReceipt");return{code:e.result,gasUsed:e.gasUsed,receipts:t,scriptResultReceipt:e,returnReceipt:n,callResult:r}}function X(r,t,e=[]){try{let n=_0(r);return t(n)}catch(n){throw new _(r,n.message,e)}}function Z(r,t,e){return X(r,n=>{n.returnReceipt.type===m.Revert&&J.throwError("Script Reverted",B.errors.CALL_EXCEPTION,e),n.returnReceipt.type!==m.Return&&n.returnReceipt.type!==m.ReturnData&&J.throwError(`Script Return Type [${n.returnReceipt.type}] Invalid`,B.errors.CALL_EXCEPTION,{logs:e,receipt:n.returnReceipt});let o;return n.returnReceipt.type===m.Return&&(o=n.returnReceipt.val),n.returnReceipt.type===m.ReturnData&&(o=t.program.interface.decodeFunctionResult(t.func,n.returnReceipt.data)[0]),o},e)}var A=class{bytes;scriptDataEncoder;scriptResultDecoder;constructor(t,e,n){this.bytes=A0(t),this.scriptDataEncoder=e,this.scriptResultDecoder=n}getScriptDataOffset(){return v0+S0+new w0(this.bytes.length).encodedLength}getArgOffset(){return this.getScriptDataOffset()+b0+M+I0+M+M}encodeScriptData(t){return this.scriptDataEncoder(t)}decodeCallResult(t,e=[]){return X(t,this.scriptResultDecoder,e)}};var v=new A(W,r=>{let t=k[0].inputs,e=new H().getCoder(t[0]),n=e.coders.calls.length;if(r.length>n)throw new Error(`At most ${n} calls are supported`);let o=new Uint8Array,a=[];for(let l=0;l<n;l+=1){let i=r[l],d;if(i){let C=j(i.data),n0=C.slice(0,8),r0=C.slice(8,16).some(a0=>a0===1),L=C.slice(16),O;r0?(O={Data:[o.length,L.length]},o=z([o,L])):O={Value:new U().decode(L,0)[0]},d={contract_id:{value:i.contractId},fn_selector:new U().decode(n0,0)[0],fn_arg:O,parameters:{amount:i.amount?K(i.amount):void 0,asset_id:i.assetId?{value:i.assetId}:void 0,gas:i.gas?K(i.gas):void 0}}}else d=void 0;a.push(d)}let p={calls:a},s=e.encode(p);return z([s,o])},r=>{if(E(r.code)!==0)throw new Error(`Script returned non-zero result: ${r.code}`);if(r.returnReceipt.type!==E0.ReturnData)throw new Error("Expected returnReceipt to be a ReturnDataReceipt");let t=j(r.returnReceipt.data),e=k[0].outputs,n=new H().getCoder(e[0]),[o,a]=n.decode(t,0),p=t.slice(a),s=[];return o.call_returns.forEach((l,i)=>{if(l)if(l.Data){let[d,C]=l.Data;s[i]=p.slice(E(d),E(d)+E(C))}else s[i]=new U().encode(l.Value)}),s});import{bn as F0}from"@fuel-ts/math";import{getDecodedLogs as L0}from"@fuel-ts/providers";import{ReceiptType as O0}from"@fuel-ts/transactions";function D0(r){let t=r.receipts.find(e=>e.type===O0.ScriptResult);return(t==null?void 0:t.gasUsed)||F0(0)}var S=class{functionScopes;isMultiCall;gasUsed;value;constructor(t,e,n){this.functionScopes=Array.isArray(t)?t:[t],this.isMultiCall=n,this.value=this.getDecodedValue(e),this.gasUsed=D0(e)}getFirstCallConfig(){if(!!this.functionScopes[0])return this.functionScopes[0].getCallConfig()}getDecodedValue(t){let e=this.getDecodedLogs(t.receipts),n=this.getFirstCallConfig();if(this.functionScopes.length===1&&n&&"bytes"in n.program)return Z(t,n,e);let a=v.decodeCallResult(t,e).map((p,s)=>{var d;let{program:l,func:i}=this.functionScopes[s].getCallConfig();return(d=l.interface.decodeFunctionResult(i,p))==null?void 0:d[0]});return this.isMultiCall?a:a==null?void 0:a[0]}getDecodedLogs(t){let e=this.getFirstCallConfig();if(!e)return[];let{program:n}=e;return L0(t,n.interface)}},R=class extends S{transactionId;transactionResponse;transactionResult;program;logs;constructor(t,e,n,o,a){super(t,n,a),this.transactionResponse=e,this.transactionResult=n,this.transactionId=this.transactionResponse.id,this.program=o,this.logs=this.getDecodedLogs(n.receipts)}static async build(t,e,n,o){let a=await e.waitForResult();return new R(t,e,a,o,n)}},g=class extends S{callResult;constructor(t,e,n){super(t,e,n),this.callResult=e}static async build(t,e,n){return await new g(t,e,n)}};function k0(r){let{program:t,args:e,forward:n,func:o,callParameters:a,bytesOffset:p}=r.getCallConfig(),s=t.interface.encodeFunctionData(o,e,v.getScriptDataOffset()+p);return{contractId:t.id,data:s,assetId:n==null?void 0:n.assetId,amount:n==null?void 0:n.amount,gas:a==null?void 0:a.gasLimit}}var f=class{transactionRequest;program;functionInvocationScopes=[];txParameters;requiredCoins=[];isMultiCall=!1;constructor(t,e){this.program=t,this.isMultiCall=e,this.transactionRequest=new N0({gasLimit:q0})}get calls(){return this.functionInvocationScopes.map(t=>k0(t))}static getCallOptions(t){return{fundTransaction:!0,...t}}updateScriptRequest(){let t=this.calls;t.forEach(e=>{this.transactionRequest.addContract(e.contractId)}),this.transactionRequest.setScript(v,t)}getRequiredCoins(){return this.calls.map(e=>({assetId:String(e.assetId),amount:h(e.amount||0)})).concat(this.transactionRequest.calculateFee()).filter(({assetId:e,amount:n})=>e&&!h(n).isZero())}updateRequiredCoins(){let t=this.getRequiredCoins(),e=(n,{assetId:o,amount:a})=>{var s;let p=((s=n.get(o))==null?void 0:s.amount)||h(0);return n.set(o,{assetId:String(o),amount:p.add(a)})};this.requiredCoins=Array.from(t.reduce(e,new Map).values())}addCall(t){return this.addCalls([t]),this}addCalls(t){return this.functionInvocationScopes.push(...t),this.updateScriptRequest(),this.updateRequiredCoins(),this}async prepareTransaction(t){this.updateScriptRequest(),this.updateRequiredCoins(),this.checkGasLimitTotal(),f.getCallOptions(t).fundTransaction&&this.program.account&&await this.fundWithRequiredCoins()}checkGasLimitTotal(){if(this.calls.reduce((e,n)=>e.add(n.gas||0),h(0)).gt(this.transactionRequest.gasLimit))throw new Error("Transaction gasLimit can't be lower than the sum of the forwarded gas of each call")}async getTransactionCost(t){var a;let e=((a=this.program.account)==null?void 0:a.provider)||this.program.provider;T(e,"Wallet or Provider is required!"),await this.prepareTransaction(t);let n=t0(this.transactionRequest);return n.gasPrice=h(Y(n.gasPrice)||Y((t==null?void 0:t.gasPrice)||0)),await e.getTransactionCost(n,t==null?void 0:t.tolerance)}async fundWithRequiredCoins(){var e;this.transactionRequest.inputs=this.transactionRequest.inputs.filter(n=>n.type!==P0.Coin);let t=await((e=this.program.account)==null?void 0:e.getResourcesToSpend(this.requiredCoins));return this.transactionRequest.addResources(t||[]),this}txParams(t){var n;this.txParameters=t;let e=this.transactionRequest;return e.gasLimit=h(t.gasLimit||e.gasLimit),e.gasPrice=h(t.gasPrice||e.gasPrice),e.addVariableOutputs(((n=this.txParameters)==null?void 0:n.variableOutputs)||0),this}addContracts(t){return t.forEach(e=>{this.transactionRequest.addContract(e.id),this.program.interface.updateExternalLoggedTypes(e.id.toB256(),[...e.interface.loggedTypes])}),this}async getTransactionRequest(t){return await this.prepareTransaction(t),this.transactionRequest}async call(t){T(this.program.account,"Wallet is required!");let e=await this.getTransactionRequest(t),n=await this.program.account.sendTransaction(e);return R.build(this.functionInvocationScopes,n,this.isMultiCall,this.program)}async simulate(t){T(this.program.account,"Wallet is required!");let e=await this.getTransactionRequest(t),n=await this.program.account.simulateTransaction(e);return g.build(this.functionInvocationScopes,n,this.isMultiCall)}async dryRun(t){var s;let e=((s=this.program.account)==null?void 0:s.provider)||this.program.provider;T(e,"Wallet or Provider is required!");let n=await this.getTransactionRequest(t),o=t0(n),a=await e.call(o,{utxoValidation:!1});return await g.build(this.functionInvocationScopes,a,this.isMultiCall)}async get(t){return this.dryRun({fundTransaction:!1,...t})}};var b=class extends f{func;callParameters;forward;args;constructor(t,e,n){super(t,!1),this.func=e,this.args=n||[],this.setArguments(...n),super.addCall(this)}getCallConfig(){return{func:this.func,program:this.program,callParameters:this.callParameters,txParameters:this.txParameters,forward:this.forward,args:this.args,bytesOffset:this.transactionRequest.bytesOffset||0}}setArguments(...t){return this.args=t||[],this.updateScriptRequest(),this}callParams(t){if(this.callParameters=t,t!=null&&t.forward){if(!this.func.attributes.find(e=>e.name==="payable"))throw new Error("Function is not payable.");this.forward=M0(t.forward)}return this.setArguments(...this.args),this.updateRequiredCoins(),this}};var I=class extends f{constructor(t,e){super(t,!0),this.addCalls(e)}addCall(t){return super.addCalls([t])}addCalls(t){return super.addCalls(t)}};import{Interface as e0}from"@fuel-ts/abi-coder";import{Address as B0}from"@fuel-ts/address";var F=class{id;provider;interface;account;functions={};constructor(t,e,n){this.interface=e instanceof e0?e:new e0(e),this.id=B0.fromAddressOrString(t),n&&"provider"in n?(this.provider=n.provider,this.account=n):(this.provider=n,this.account=null),Object.keys(this.interface.functions).forEach(o=>{let a=this.interface.getFunction(o);Object.defineProperty(this.functions,a.name,{value:this.buildFunction(a),writable:!1})})}buildFunction(t){return(...e)=>new b(this,t,e)}multiCall(t){return new I(this,t)}getBalance(t){if(!this.provider)throw new Error("Contract instance has no provider.");return this.provider.getContractBalance(this.id,t)}};export{q as AssertFailedRevertError,F as Contract,R as FunctionInvocationResult,b as FunctionInvocationScope,S as InvocationResult,I as MultiCallInvocationScope,D as RequireRevertError,y as RevertError,A as ScriptRequest,_ as ScriptResultDecoderError,P as SendMessageRevertError,N as TransferToAddressRevertError,T as assert,$ as getDocs,G as revertErrorFactory};
//# sourceMappingURL=index.mjs.map