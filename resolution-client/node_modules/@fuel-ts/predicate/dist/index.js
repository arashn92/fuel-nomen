"use strict";var p=Object.defineProperty;var b=Object.getOwnPropertyDescriptor;var k=Object.getOwnPropertyNames;var L=Object.prototype.hasOwnProperty;var x=(o,t)=>{for(var r in t)p(o,r,{get:t[r],enumerable:!0})},C=(o,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let e of k(t))!L.call(o,e)&&e!==r&&p(o,e,{get:()=>t[e],enumerable:!(n=b(t,e))||n.enumerable});return o};var q=o=>C(p({},"__esModule",{value:!0}),o);var w={};x(w,{Predicate:()=>f});module.exports=q(w);var a=require("@ethersproject/bytes"),d=require("@ethersproject/logger"),c=require("@fuel-ts/abi-coder"),h=require("@fuel-ts/address"),l=require("@fuel-ts/providers"),A=require("@fuel-ts/transactions"),T=require("@fuel-ts/versions"),R=require("@fuel-ts/wallet");var i=require("@ethersproject/bytes"),u=require("@fuel-ts/merkle"),y=o=>{let r=[],n=(0,i.arrayify)(o);for(let e=0;e<n.length;e+=8){let s=new Uint8Array(8);s.set(n.slice(e,e+8)),r.push(s)}return(0,u.calcRoot)(r.map(e=>(0,i.hexlify)(e)))};var D=new d.Logger(T.versions.FUELS),f=class extends R.Account{bytes;types;predicateData=Uint8Array.from([]);interface;constructor(t,r,n){let e=h.Address.fromB256(y(t));if(super(e,n),this.bytes=(0,a.arrayify)(t),r){this.interface=new c.Interface(r);let s=this.interface.fragments.find(({name:g})=>g==="main");s!==void 0?this.types=s.inputs:D.throwArgumentError('Cannot use ABI without "main" function',"Function fragments",this.interface.fragments)}}populateTransactionPredicateData(t){var n;let r=(0,l.transactionRequestify)(t);return(n=r.inputs)==null||n.forEach(e=>{e.type===A.InputType.Coin&&(0,a.hexlify)(e.owner)===this.address.toB256()&&(e.predicate=this.bytes,e.predicateData=this.predicateData)}),r}sendTransaction(t){let r=this.populateTransactionPredicateData(t);return super.sendTransaction(r)}simulateTransaction(t){let r=this.populateTransactionPredicateData(t);return super.simulateTransaction(r)}setData(...t){let n=new c.AbiCoder().encode(this.types||[],t);return this.predicateData=n,this}};0&&(module.exports={Predicate});
//# sourceMappingURL=index.js.map